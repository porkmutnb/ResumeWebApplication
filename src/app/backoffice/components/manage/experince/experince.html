<details class="mb-4 border-b border-gray-300 dark:border-white/20 pb-2" open>
  <summary
    class="cursor-pointer text-xl font-semibold text-blue-400 hover:text-blue-600 focus:outline-none py-2 underline"
  >
    Experience
    <span class="float-right text-gray-500 details-icon">
      <svg
        class="h-6 w-6 inline-block transform transition-transform duration-200 rotate-0"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M19 9l-7 7-7-7"
        ></path>
      </svg>
    </span>
  </summary>
  <div
    class="p-2 bg-blue-300 dark:bg-gray-800 rounded-b-lg"
    *ngIf="experienceSection.length > 0"
  >
    <div class="space-y-4">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <div
          class="bg-sky-200 dark:bg-gray-900 p-4 rounded flex flex-col relative"
          *ngFor="let exp of experienceSection; let i = index"
        >
          <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">ID</label>
          <input
            type="text"
            class="mb-2 block w-20 p-1 text-gray-900 dark:text-white border border-gray-300 dark:border-white/20 rounded bg-gray-50 dark:bg-gray-900 text-xs focus:ring-blue-500 focus:border-blue-500 bg-gray-200 text-center"
            [(ngModel)]="exp.id"
            readonly
          />
          <button
            type="button"
            class="absolute top-0 right-0 m-2 p-2 bg-red-500 rounded-full shadow hover:bg-red-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-300 focus:ring-offset-2 flex items-center justify-center z-10 cursor-pointer"
            (click)="removeExperience(i)"
            aria-label="Delete Experience"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 text-white"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
          <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
            >Company Name</label
          >
          <input
            type="text"
            class="mb-2 block w-full p-2 text-gray-900 dark:text-white border border-gray-300 dark:border-white/20 rounded-lg bg-gray-50 dark:bg-gray-900 text-xs focus:ring-blue-500 focus:border-blue-500"
            [(ngModel)]="exp.name"
          />
          <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
            >Position</label
          >
          <input
            type="text"
            class="mb-2 block w-full p-2 text-gray-900 dark:text-white border border-gray-300 dark:border-white/20 rounded-lg bg-gray-50 dark:bg-gray-900 text-xs focus:ring-blue-500 focus:border-blue-500"
            [(ngModel)]="exp.position"
          />
          <div class="flex gap-2">
            <div class="flex-1">
              <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                >Start Date</label
              >
              <input
                type="text"
                class="mb-2 block w-full p-2 text-gray-900 dark:text-white border border-gray-300 dark:border-white/20 rounded-lg bg-gray-50 dark:bg-gray-900 text-xs focus:ring-blue-500 focus:border-blue-500"
                [(ngModel)]="exp.startDate"
              />
            </div>
            <div class="flex-1">
              <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                >End Date</label
              >
              <input
                type="text"
                class="mb-2 block w-full p-2 text-gray-900 dark:text-white border border-gray-300 dark:border-white/20 rounded-lg bg-gray-50 dark:bg-gray-900 text-xs focus:ring-blue-500 focus:border-blue-500"
                [(ngModel)]="exp.endDate"
              />
            </div>
          </div>
          <div class="mt-2">
            <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
              >Visible</label
            >
            <div class="flex justify-between items-center">
              <div class="flex gap-4">
                <label class="inline-flex items-center">
                  <input
                    type="radio"
                    class="form-radio text-blue-500"
                    [(ngModel)]="exp.visible"
                    [value]="true"
                    [name]="'visible-exp-' + i"
                  />
                  <span class="ml-2 text-gray-900 dark:text-white">Show</span>
                </label>
                <label class="inline-flex items-center">
                  <input
                    type="radio"
                    class="form-radio text-blue-500"
                    [(ngModel)]="exp.visible"
                    [value]="false"
                    [name]="'visible-exp-' + i"
                  />
                  <span class="ml-2 text-gray-900 dark:text-white">Hide</span>
                </label>
              </div>
              <button
                type="button"
                class="px-4 py-2 bg-blue-500 text-white font-medium rounded-lg shadow hover:bg-blue-600 focus:ring-4 focus:ring-blue-300 transition-colors text-sm"
                (click)="openExperiencePopup(exp)"
              >
                Add Detail
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="flex justify-center mt-4">
        <button
          type="button"
          class="w-full max-w-md px-6 py-2 bg-green-500 text-white rounded-lg shadow hover:bg-green-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-300 focus:ring-offset-2 text-center"
          (click)="addExperience()"
        >
          Add Experience
        </button>
      </div>
    </div>
  </div>
</details>
<div
  class="mt-8 mb-4 flex flex-col sm:flex-row items-center justify-center gap-4 px-2"
>
  <button
    type="button"
    class="w-full sm:w-auto flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2"
    (click)="updateExperince()"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-5 w-5 mr-2"
      viewBox="0 0 20 20"
      fill="currentColor"
    >
      <path
        d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"
      />
      <path
        fill-rule="evenodd"
        d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"
        clip-rule="evenodd"
      />
    </svg>
    <span>Update</span>
  </button>
  <button
    type="button"
    class="w-full sm:w-auto flex items-center justify-center px-6 py-3 bg-gray-500 text-white rounded-lg shadow-md hover:bg-gray-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2"
    (click)="resetExperience()"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-5 w-5 mr-2"
      viewBox="0 0 20 20"
      fill="currentColor"
    >
      <path
        fill-rule="evenodd"
        d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
        clip-rule="evenodd"
      />
    </svg>
    <span>Reset</span>
  </button>
</div>
<app-loading-overlay [isLoading]="isPageLoading"></app-loading-overlay>

<app-experience-popup
  [isOpen]="isExperiencePopupOpen"
  [selectedExperience]="selectedExperience"
  [isEditMode]="true"
  (closePopup)="closeExperiencePopup()"
>
</app-experience-popup>
